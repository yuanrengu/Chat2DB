"use strict";(self.webpackChunkchat_2_db=self.webpackChunkchat_2_db||[]).push([[8375],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>g});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),c=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(o.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(a),d=r,g=u["".concat(o,".").concat(d)]||u[d]||m[d]||s;return a?n.createElement(g,i(i({ref:t},p),{},{components:a})):n.createElement(g,i({ref:t},p))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,i=new Array(s);i[0]=d;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<s;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},4098:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>c,toc:()=>u});a(67294);var n=a(3905);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const l={title:"Livestreaming State Management APIs",sidebar_position:6},o=void 0,c={unversionedId:"livestreaming/state-management-apis",id:"livestreaming/state-management-apis",title:"Livestreaming State Management APIs",description:"This topic talks about how you can use livestreaming state management APIs. Using Dyte's live-streaming state management APIs you can easily manage stage requests, such as leave and join stage, manage permissions, kick participants and so on.",source:"@site/docs/react-web-core/livestreaming/state-management-apis.mdx",sourceDirName:"livestreaming",slug:"/livestreaming/state-management-apis",permalink:"/react-web-core/livestreaming/state-management-apis",draft:!1,editUrl:"https://github.com/dyte-in/docs/tree/main/docs/react-web-core/livestreaming/state-management-apis.mdx",tags:[],version:"current",lastUpdatedAt:1682414612,formattedLastUpdatedAt:"Apr 25, 2023",sidebarPosition:6,frontMatter:{title:"Livestreaming State Management APIs",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Recording",permalink:"/react-web-core/recording"},next:{title:"Livestreaming: Properties, Functions, and Events",permalink:"/react-web-core/livestreaming/livestream-apis"}},p={},u=[{value:"Access the stage APIs",id:"access-the-stage-apis",level:2},{value:"Properties",id:"properties",level:2},{value:"Host controls",id:"host-controls",level:2},{value:"Join stage",id:"join-stage",level:3},{value:"Leave stage",id:"leave-stage",level:3},{value:"Grant access",id:"grant-access",level:3},{value:"Deny access",id:"deny-access",level:3},{value:"Kick users",id:"kick-users",level:3},{value:"Participant controls",id:"participant-controls",level:2},{value:"Request access",id:"request-access",level:3},{value:"Cancel access request",id:"cancel-access-request",level:3},{value:"Events",id:"events",level:2}],m={toc:u},d="wrapper";function g(e){var{components:t}=e,a=i(e,["components"]);return(0,n.kt)(d,s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){r(e,t,a[t])}))}return e}({},m,a),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"This topic talks about how you can use livestreaming state management APIs. Using Dyte's live-streaming state management APIs you can easily manage stage requests, such as leave and join stage, manage permissions, kick participants and so on."),(0,n.kt)("p",null,"The foundation of Dyte's livestreaming is based on a stage, which can be accessed by hosts and viewers. While hosts can directly enter the stage, viewers can request to join it. The stage is broadcasted live to all viewers. Here's how you can interact with stage APIs:"),(0,n.kt)("h2",{id:"access-the-stage-apis"},"Access the stage APIs"),(0,n.kt)("p",null,"The stage module can be accessed under ",(0,n.kt)("a",{parentName:"p",href:"https://docs.dyte.io/react-web-core/reference/DyteStage"},(0,n.kt)("inlineCode",{parentName:"a"},"meeting.stage"))," namespace."),(0,n.kt)("h2",{id:"properties"},"Properties"),(0,n.kt)("p",null,"Dyte's livestreaming state management APIs provides useful properties to help you manage your stage effectively. One of these properties is the ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," attribute, which can take on various values based on the user's activity. The status can assume the following values:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"ON_STAGE"),": This value indicates that the user is currently on the stage and participating in the live stream."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"OFF_STAGE"),": This value means that the user is viewing the live stream but is not on the stage."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"REQUESTED_TO_JOIN_STAGE"),": The user has a pending request to join livestream. If the user has made a request to join the stage, this value will be assigned to their status until the host accepts or rejects their request."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"ACCEPTED_TO_JOIN_STAGE"),": The host has accepted user\u2019s request to join livestream. If the host accepts the user's request to join the stage, this value will be assigned to the user's status.")),(0,n.kt)("p",null,"A user with permission to join livestream directly can only assume ",(0,n.kt)("inlineCode",{parentName:"p"},"ON_STAGE")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"ACCEPTED_TO_JOIN_STAGE")," status values."),(0,n.kt)("h2",{id:"host-controls"},"Host controls"),(0,n.kt)("p",null,"Dyte\u2019s stage management APIs allow hosts to receive and manage stage requests as well as leave and join the stage."),(0,n.kt)("h3",{id:"join-stage"},"Join stage"),(0,n.kt)("p",null,"This method connects the user to the media room, enabling them to interact with other peers in the meeting."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"await meeting.stage.join();")),(0,n.kt)("h3",{id:"leave-stage"},"Leave stage"),(0,n.kt)("p",null,"By employing this method, the user will be disconnected from the media room and subsequently unable to communicate with their peers. Additionally, their audio and video will no longer be visible to others in the room."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"await meeting.stage.leave();")),(0,n.kt)("h3",{id:"grant-access"},"Grant access"),(0,n.kt)("p",null,"You can get the user IDs from the ",(0,n.kt)("inlineCode",{parentName:"p"},"stageAccessRequestUpdate")," event."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Parameters")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Type")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"userIds"),(0,n.kt)("td",{parentName:"tr",align:null},"string[]")))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"await meeting.stage.grantAccess(userIds);")),(0,n.kt)("h3",{id:"deny-access"},"Deny access"),(0,n.kt)("p",null,"You can get the user IDs from the ",(0,n.kt)("inlineCode",{parentName:"p"},"stageAccessRequestUpdate")," event."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Parameters")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Type")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"userIds"),(0,n.kt)("td",{parentName:"tr",align:null},"string[]")))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"await meeting.stage.grantAccess(userIds);")),(0,n.kt)("h3",{id:"kick-users"},"Kick users"),(0,n.kt)("p",null,"You can get the user IDs from the ",(0,n.kt)("inlineCode",{parentName:"p"},"stageAccessRequestUpdate")," event."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Parameters")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Type")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"userIds"),(0,n.kt)("td",{parentName:"tr",align:null},"string[]")))),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"await meeting.stage.kick(userIds);")),(0,n.kt)("h2",{id:"participant-controls"},"Participant controls"),(0,n.kt)("p",null,"Dyte\u2019s stage management APIs allow participants to receive and manage stage requests as well as leave and join the stage."),(0,n.kt)("h3",{id:"request-access"},"Request access"),(0,n.kt)("p",null,"This method is used to create a new stage request which can be approved by the host. Each user (viewer or host) must call this method in order to join the stage."),(0,n.kt)("p",null,"When the host calls this method, their status will be updated to ",(0,n.kt)("inlineCode",{parentName:"p"},"ACCEPTED_TO_JOIN_STAGE"),"."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"await meeting.stage.requestAccess();")),(0,n.kt)("h3",{id:"cancel-access-request"},"Cancel access request"),(0,n.kt)("p",null,"You can call this method in order to cancel your stage request."),(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"await meeting.stage.cancelRequestAccess();")),(0,n.kt)("h2",{id:"events"},"Events"),(0,n.kt)("p",null,"Here is a list of events that the ",(0,n.kt)("inlineCode",{parentName:"p"},"meeting.stage")," module emits:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Event")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Description")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"stageAccessRequestUpdate")),(0,n.kt)("td",{parentName:"tr",align:null},"Emitted to the users with the permission ",(0,n.kt)("inlineCode",{parentName:"td"},"acceptPresentRequests")," set to true. When a new request is made or a request is cancelled, this event is triggered. It contains the updated list of stage requests in its payload.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"stageStatusUpdate")),(0,n.kt)("td",{parentName:"tr",align:null},"Emitted when the user\u2019s stage status changes. It contains the updated stage status in the payload.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"newStageRequest")),(0,n.kt)("td",{parentName:"tr",align:null},"Emitted to the users with the permission ",(0,n.kt)("inlineCode",{parentName:"td"},"acceptPresentRequests")," set to true. This event is triggered when there are new stage requests. It contains the number of stage requests in its payload. For example, to show notifications.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"stageRequestApproved")),(0,n.kt)("td",{parentName:"tr",align:null},"Emitted when a user\u2019s request to join stage has been approved.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("inlineCode",{parentName:"td"},"stageRequestRejected")),(0,n.kt)("td",{parentName:"tr",align:null},"Emitted when a user\u2019s request to join stage has been rejected.")))))}g.isMDXComponent=!0}}]);